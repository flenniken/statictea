$$ # StaticTea template for generating markdown documents from nim
$$ # modules with doc comments.
$$ #
$$ # Define replacement patterns to remove formatting from the descriptions.
$$ block
$$ : g.patterns = list( +
$$ :   "@@", '', +
$$ :   "@\|", '[', +
$$ :   "\|@", ']', +
$$ :   "[ ]*@:", h.newline, +
$$ :   "&quot;", '"', +
$$ :   "&gt;", '>', +
$$ :   "&lt;", '<', +
$$ :   "&amp;", '&')
$$ : path = path(s.orig)
$$ : g.moduleName = path.filename
$$ endblock
$$ #
$$ nextline
# {g.moduleName}

$$ # Module description.
$$ block
$$ : description = replaceRe(s.moduleDescription, g.patterns)
{description}

* [{g.moduleName}](../src/{g.moduleName}) &mdash; Nim source code.
$$ endblock
$$ #
$$ # Show the index label when there are entries.
$$ nextline t.output = case(len(s.entries), list(0, 'skip'), 'result')
# Index

$$ #
$$ #
$$ # Index to types and functions.
$$ nextline
$$ : t.repeat = len(s.entries)
$$ : entry = get(s.entries, t.row, dict())
$$ : cases = list( +
$$ :   "skType", "type: ", +
$$ :   "skConst", "const: ", +
$$ :   "skMacro", "macro: ")
$$ : type = case(entry.type, cases, "")
$$ : desc = get(entry, "description", "")
$$ : sentence = substr(desc, 0, add(find(desc, '.', -1), 1))
$$ : short = replaceRe(sentence, g.patterns)
$$ : anchor = githubAnchor(entry.name)
* {type}[{entry.name}](#{anchor}) &mdash; {short}

$$ # Function and type descriptions.
$$ block
$$ : t.repeat = len(s.entries)
$$ : entry = get(s.entries, t.row)
$$ : desc = get(entry, "description", "")
$$ : description = replaceRe(desc, g.patterns)
$$ : code = replaceRe(entry.code, "[ ]*$", "")
$$ : pos = find(code, " {", len(code))
$$ : signature = substr(code, 0, pos)
# {entry.name}

{description}

```nim
{signature}
```


$$ endblock

---
â¦¿ Markdown page generated by [StaticTea](https://github.com/flenniken/statictea/) from nim doc comments. â¦¿
