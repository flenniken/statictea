# replacement.nim

Handle the replacement block lines.

* [replacement.nim](../src/replacement.nim) &mdash; Nim source code.
# Index

* type: [ReplaceLineKind](#replacelinekind) &mdash; Line type returned by yieldReplacementLine.
* type: [ReplaceLine](#replaceline) &mdash; Line information returned by yieldReplacementLine.
* [newReplaceLine](#newreplaceline) &mdash; Return a ReplaceLine object.
* [`$`](#`$`) &mdash; Return a string representation of a ReplaceLine.
* [writeTempSegments](#writetempsegments) &mdash; Write the updated replacement block to the result stream.
* [closeDelete](#closedelete) &mdash; Close the TempSegments and delete its backing temporary file.
* [storeLineSegments](#storelinesegments) &mdash; Divide the line into segments and write them to the TempSegments' temp file.
* [yieldReplacementLine](#yieldreplacementline) &mdash; Yield all the replacement block lines and the endblock line too, if it exists.
* [newTempSegments](#newtempsegments) &mdash; Read replacement block lines and return a TempSegments object containing the compiled block.

# ReplaceLineKind

Line type returned by yieldReplacementLine.

```nim
ReplaceLineKind = enum
  rlReplaceLine,            ## A replacement block line.
  rlEndblockLine             ## The endblock line.
```


# ReplaceLine

Line information returned by yieldReplacementLine.

```nim
ReplaceLine = object
  kind*: ReplaceLineKind
  line*: string

```


# newReplaceLine

Return a ReplaceLine object.

```nim
func newReplaceLine(kind: ReplaceLineKind; line: string): ReplaceLine
```


# `$`

Return a string representation of a ReplaceLine.

```nim
func `$`(replaceLine: ReplaceLine): string
```


# writeTempSegments

Write the updated replacement block to the result stream.  It does it by writing all the stored segments and updating variable segments as it goes. The lineNum is the beginning line of the replacement block.

```nim
proc writeTempSegments(env: var Env; tempSegments: var TempSegments;
                       lineNum: Natural; variables: Variables)
```


# closeDelete

Close the TempSegments and delete its backing temporary file.

```nim
proc closeDelete(tempSegments: TempSegments)
```


# storeLineSegments

Divide the line into segments and write them to the TempSegments' temp file.

```nim
proc storeLineSegments(env: var Env; tempSegments: TempSegments;
                       prepostTable: PrepostTable; line: string)
```


# yieldReplacementLine

Yield all the replacement block lines and the endblock line too, if it exists.

```nim
iterator yieldReplacementLine(env: var Env; firstReplaceLine: string;
                              lb: var LineBuffer; prepostTable: PrepostTable;
                              command: string; maxLines: Natural): ReplaceLine
```


# newTempSegments

Read replacement block lines and return a TempSegments object containing the compiled block. Call writeTempSegments to write out the segments. Call closeDelete to close and delete the associated temp file.

```nim
proc newTempSegments(env: var Env; lb: var LineBuffer;
                     prepostTable: PrepostTable; command: string;
                     repeat: Natural; variables: Variables): Option[TempSegments]
```



---
⦿ Markdown page generated by [StaticTea](https://github.com/flenniken/statictea/) from nim doc comments. ⦿
