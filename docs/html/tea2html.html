<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>templates/tea2html.tea</title>
<link rel="stylesheet" type="text/css" href="nimModule.css">
</head>
<body>
<h1>templates/tea2html.tea</h1>

<pre>
<span class="t-doc">## Highlight the statictea code with colored html spans.  Convert the
</span><span class="t-doc">## tea code (s.text) to syntax highlighted html text (o.htmlText).
</span>
<span class="t-doc">## The nimble task tea2html runs the template.
</span>
<span class="t-dotName">u.handle-fragment</span> = <span class="t-funcCall">func</span>(<span class="t-param">ix</span>: <span class="t-type">int</span>, <span class="t-param">fragment</span>: <span class="t-type">list</span>, <span class="t-param">frags</span>: <span class="t-type">list</span>) <span class="t-type">bool</span>
  <span class="t-doc">## Highlight the fragment for html and add it to frags.
</span>  <span class="t-dotName">tag</span> = <span class="t-dotName">fragment</span>[<span class="t-num">0</span>]
  <span class="t-dotName">str</span> = <span class="t-funcCall">html</span>(<span class="t-dotName">fragment</span>[<span class="t-num">1</span>], <span class="t-str">&quot;body&quot;</span>)
  <span class="t-dotName">frags</span> &amp;= <span class="t-funcCall">if</span>((<span class="t-dotName">tag</span> == <span class="t-str">&quot;other&quot;</span>), <span class="t-dotName">str</span>, +
    <span class="t-funcCall">format</span>(<span class="t-str">&quot;&lt;span class=\&quot;t-{tag}\&quot;&gt;{str}&lt;/span&gt;&quot;</span>))
  <span class="t-funcCall">return</span>(<span class="t-dotName">false</span>)

<span class="t-comment"># Syntax highlight the server code.
</span><span class="t-dotName">highlightedFrags</span> = []
<span class="t-funcCall">listLoop</span>(<span class="t-funcCall">parseCode</span>(<span class="t-dotName">s.text</span>), <span class="t-dotName">highlightedFrags</span>, <span class="t-dotName">u.handle-fragment</span>)
<span class="t-dotName">o.htmlText</span> = <span class="t-funcCall">join</span>(<span class="t-dotName">highlightedFrags</span>, <span class="t-str">&quot;&quot;</span>)

</pre>

</body>
</html>
