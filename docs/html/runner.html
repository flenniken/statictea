<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
</head>
<style>
body {
    max-width: 40em;
    font-size: 2em;
    margin-left: 1em;
}

#staticteadep {
    width: 100%;
}

.signature {
    color: green;
}

.description {
    white-space: pre-wrap;
}

.nim-code {
    border-left: 6px solid green;
    padding-left: 10px;
}
</style>
<body>
<h1>runner.nim</h1>

A standalone command to run Single Test File (stf) files.

You use runner for testing command line applications. A stf file
contains the test which the runner executes to determine whether the
test passed.

A stf file contains instructions for creating files, running files and
comparing files and it is designed to look good in a markdown reader.

See the runner help message (get_help) for more information about stf
files, or run the nimble task "runhelp" to show the help text with
glow.

Nim source code: <a href="../../src/runner.nim">runner.nim</a>

<h1>Index</h1>

<ul>
<li>const:  <a href="#runnerid">runnerId</a> &mdash; The first line of the stf file.</li>
<li>type:  <a href="#runargs">RunArgs</a> &mdash; RunArgs holds the command line arguments.</li>
<li>type:  <a href="#rc">Rc</a> &mdash; Rc holds a return code where 0 is success.</li>
<li>type:  <a href="#runfileline">RunFileLine</a> &mdash; RunFileLine holds the file line options.</li>
<li>type:  <a href="#expectedline">ExpectedLine</a> &mdash; ExpectedLine holds the expected line options.</li>
<li>type:  <a href="#linekind">LineKind</a> &mdash; The kind of line in a stf file.</li>
<li>type:  <a href="#anyline">AnyLine</a> &mdash; Contains the information about one line in a stf file.</li>
<li>type:  <a href="#dirandfiles">DirAndFiles</a> &mdash; DirAndFiles holds the file and compare lines of the stf file.</li>
<li> <a href="#newanylinerunfileline">newAnyLineRunFileLine</a> &mdash; Create a new AnyLine object for a file line.</li>
<li> <a href="#newanylineexpectedline">newAnyLineExpectedLine</a> &mdash; Create a new AnyLine object for a expected line.</li>
<li> <a href="#newanylineblockline">newAnyLineBlockLine</a> &mdash; Create a new AnyLine object for a block line.</li>
<li> <a href="#newanylinecommentline">newAnyLineCommentLine</a> &mdash; Create a new AnyLine object for a comment line.</li>
<li> <a href="#newanylineidline">newAnyLineIdLine</a> &mdash; Create a new AnyLine object for a id line.</li>
<li> <a href="#newrunargs">newRunArgs</a> &mdash; Create a new RunArgs object.</li>
<li> <a href="#newrunfileline">newRunFileLine</a> &mdash; Create a new RunFileLine object.</li>
<li> <a href="#newexpectedline">newExpectedLine</a> &mdash; Create a new ExpectedLine object.</li>
<li> <a href="#newdirandfiles">newDirAndFiles</a> &mdash; Create a new DirAndFiles object.</li>
<li> <a href="#">`$`</a> &mdash; Return a string representation of a ExpectedLine object.</li>
<li> <a href="#-1">`$`</a> &mdash; Return a string representation of a RunFileLine object.</li>
<li> <a href="#writeerr">writeErr</a> &mdash; Write a message to stderr.</li>
<li> <a href="#createfolder">createFolder</a> &mdash; Create a folder with the given name.</li>
<li> <a href="#deletefolder">deleteFolder</a> &mdash; Delete a folder with the given name.</li>
<li> <a href="#parseruncommandline">parseRunCommandLine</a> &mdash; Parse the command line arguments.</li>
<li> <a href="#isrunfileline">isRunFileLine</a> &mdash; Return true when the line is a file line.</li>
<li> <a href="#isexpectedline">isExpectedLine</a> &mdash; Return true when the line is an expected line.</li>
<li> <a href="#parserunfileline">parseRunFileLine</a> &mdash; Parse a file command line.</li>
<li> <a href="#parseexpectedline">parseExpectedLine</a> &mdash; Parse an expected line.</li>
<li> <a href="#opennewfile">openNewFile</a> &mdash; Create a new file in the given folder and return an open File object.</li>
<li> <a href="#getanyline">getAnyLine</a> &mdash; Return information about the stf line.</li>
<li> <a href="#makedirandfiles">makeDirAndFiles</a> &mdash; Read the stf file and create its temp folder and files.</li>
<li> <a href="#runcommands">runCommands</a> &mdash; Run the command files and return 0 when they all returned their expected return code.</li>
<li> <a href="#runstffilename">runStfFilename</a> &mdash; Run the stf file and leave the temp dir.</li>
</ul>

<h3 id=runnerid>runnerId</h3>

<pre class="description">
The first line of the stf file.
</pre>

<pre class="nim-code">
runnerId = "stf file, version 0.1.0"
</pre>

<h3 id=runargs>RunArgs</h3>

<pre class="description">
RunArgs holds the command line arguments.
</pre>

<pre class="nim-code">
RunArgs = object
  help*: bool
  version*: bool
  leaveTempDir*: bool
  filename*: string
  directory*: string

</pre>

<h3 id=rc>Rc</h3>

<pre class="description">
Rc holds a return code where 0 is success.
</pre>

<pre class="nim-code">
Rc = int
</pre>

<h3 id=runfileline>RunFileLine</h3>

<pre class="description">
RunFileLine holds the file line options.
</pre>

<pre class="nim-code">
RunFileLine = object
  filename*: string
  noLastEnding*: bool
  command*: bool
  nonZeroReturn*: bool

</pre>

<h3 id=expectedline>ExpectedLine</h3>

<pre class="description">
ExpectedLine holds the expected line options.
</pre>

<pre class="nim-code">
ExpectedLine = object
  gotFilename*: string
  expectedFilename*: string

</pre>

<h3 id=linekind>LineKind</h3>

<pre class="description">
The kind of line in a stf file.
</pre>

<pre class="nim-code">
LineKind = enum
  lkRunFileLine, lkExpectedLine, lkBlockLine, lkIdLine, lkCommentLine
</pre>

<h3 id=anyline>AnyLine</h3>

<pre class="description">
Contains the information about one line in a stf file.
</pre>

<pre class="nim-code">
AnyLine = object
  case kind*: LineKind
  of lkRunFileLine:
      runFileLine*: RunFileLine

  of lkExpectedLine:
      expectedLine*: ExpectedLine

  of lkBlockLine:
      blockLine*: string

  of lkIdLine:
      idLine*: string

  of lkCommentLine:
      commentLine*: string


</pre>

<h3 id=dirandfiles>DirAndFiles</h3>

<pre class="description">
DirAndFiles holds the file and compare lines of the stf file.
</pre>

<pre class="nim-code">
DirAndFiles = object
  expectedLines*: seq[ExpectedLine]
  runFileLines*: seq[RunFileLine]

</pre>

<h3 id=newanylinerunfileline>newAnyLineRunFileLine</h3>

<pre class="description">
Create a new AnyLine object for a file line.
</pre>

<pre class="nim-code">
func newAnyLineRunFileLine(runFileLine: RunFileLine): AnyLine
</pre>

<h3 id=newanylineexpectedline>newAnyLineExpectedLine</h3>

<pre class="description">
Create a new AnyLine object for a expected line.
</pre>

<pre class="nim-code">
func newAnyLineExpectedLine(expectedLine: ExpectedLine): AnyLine
</pre>

<h3 id=newanylineblockline>newAnyLineBlockLine</h3>

<pre class="description">
Create a new AnyLine object for a block line.
</pre>

<pre class="nim-code">
func newAnyLineBlockLine(blockLine: string): AnyLine
</pre>

<h3 id=newanylinecommentline>newAnyLineCommentLine</h3>

<pre class="description">
Create a new AnyLine object for a comment line.
</pre>

<pre class="nim-code">
func newAnyLineCommentLine(commentLine: string): AnyLine
</pre>

<h3 id=newanylineidline>newAnyLineIdLine</h3>

<pre class="description">
Create a new AnyLine object for a id line.
</pre>

<pre class="nim-code">
func newAnyLineIdLine(idLine: string): AnyLine
</pre>

<h3 id=newrunargs>newRunArgs</h3>

<pre class="description">
Create a new RunArgs object.
</pre>

<pre class="nim-code">
func newRunArgs(help = false; version = false; leaveTempDir = false;
                filename = ""; directory = ""): RunArgs
</pre>

<h3 id=newrunfileline>newRunFileLine</h3>

<pre class="description">
Create a new RunFileLine object.
</pre>

<pre class="nim-code">
func newRunFileLine(filename: string; noLastEnding = false; command = false;
                    nonZeroReturn = false): RunFileLine
</pre>

<h3 id=newexpectedline>newExpectedLine</h3>

<pre class="description">
Create a new ExpectedLine object.
</pre>

<pre class="nim-code">
func newExpectedLine(gotFilename: string; expectedFilename: string): ExpectedLine
</pre>

<h3 id=newdirandfiles>newDirAndFiles</h3>

<pre class="description">
Create a new DirAndFiles object.
</pre>

<pre class="nim-code">
func newDirAndFiles(expectedLines: seq[ExpectedLine];
                    runFileLines: seq[RunFileLine]): DirAndFiles
</pre>

<h3 id=>`$`</h3>

<pre class="description">
Return a string representation of a ExpectedLine object.
</pre>

<pre class="nim-code">
func `$`(r: ExpectedLine): string
</pre>

<h3 id=-1>`$`</h3>

<pre class="description">
Return a string representation of a RunFileLine object.
</pre>

<pre class="nim-code">
func `$`(r: RunFileLine): string
</pre>

<h3 id=writeerr>writeErr</h3>

<pre class="description">
Write a message to stderr.
</pre>

<pre class="nim-code">
proc writeErr(message: string)
</pre>

<h3 id=createfolder>createFolder</h3>

<pre class="description">
Create a folder with the given name. When the folder cannot be created return a message telling why, else return "".
</pre>

<pre class="nim-code">
proc createFolder(folder: string): string
</pre>

<h3 id=deletefolder>deleteFolder</h3>

<pre class="description">
Delete a folder with the given name. When the folder cannot be deleted return a message telling why, else return "".
</pre>

<pre class="nim-code">
proc deleteFolder(folder: string): string
</pre>

<h3 id=parseruncommandline>parseRunCommandLine</h3>

<pre class="description">
Parse the command line arguments.
</pre>

<pre class="nim-code">
proc parseRunCommandLine(argv: seq[string]): OpResultStr[RunArgs]
</pre>

<h3 id=isrunfileline>isRunFileLine</h3>

<pre class="description">
Return true when the line is a file line.
</pre>

<pre class="nim-code">
proc isRunFileLine(line: string): bool
</pre>

<h3 id=isexpectedline>isExpectedLine</h3>

<pre class="description">
Return true when the line is an expected line.
</pre>

<pre class="nim-code">
proc isExpectedLine(line: string): bool
</pre>

<h3 id=parserunfileline>parseRunFileLine</h3>

<pre class="description">
Parse a file command line.
</pre>

<pre class="nim-code">
proc parseRunFileLine(line: string): OpResultStr[RunFileLine]
</pre>

<h3 id=parseexpectedline>parseExpectedLine</h3>

<pre class="description">
Parse an expected line.
</pre>

<pre class="nim-code">
proc parseExpectedLine(line: string): OpResultStr[ExpectedLine]
</pre>

<h3 id=opennewfile>openNewFile</h3>

<pre class="description">
Create a new file in the given folder and return an open File object.
</pre>

<pre class="nim-code">
proc openNewFile(folder: string; filename: string): OpResultStr[File]
</pre>

<h3 id=getanyline>getAnyLine</h3>

<pre class="description">
Return information about the stf line.
</pre>

<pre class="nim-code">
proc getAnyLine(line: string): OpResultStr[AnyLine]
</pre>

<h3 id=makedirandfiles>makeDirAndFiles</h3>

<pre class="description">
Read the stf file and create its temp folder and files. Return the file lines and expected lines.
</pre>

<pre class="nim-code">
proc makeDirAndFiles(filename: string): OpResultStr[DirAndFiles]
</pre>

<h3 id=runcommands>runCommands</h3>

<pre class="description">
Run the command files and return 0 when they all returned their expected return code.
</pre>

<pre class="nim-code">
proc runCommands(folder: string; runFileLines: seq[RunFileLine]): int
</pre>

<h3 id=runstffilename>runStfFilename</h3>

<pre class="description">
Run the stf file and leave the temp dir. Return 0 when all the tests passed.
</pre>

<pre class="nim-code">
proc runStfFilename(filename: string): int
</pre>


<p>⦿ This page was generated
by <a href="https://github.com/flenniken/statictea/">statictea</a>
from nim doc comments. ⦿</p>

</body>
</html>
