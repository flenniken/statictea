# repl.nim

Run commands at a prompt.
Run evaluate print loop (REPL).


* [repl.nim](../src/repl.nim) &mdash; Nim source code.
# Index

* const: [replHelp](#replhelp) &mdash; Help text.
* type: [ReplCommand](#replcommand) &mdash; The REPL commands.
* [listInColumns](#listincolumns) &mdash; Generate a string of names in columns.
* [stringToReplCommand](#stringtoreplcommand) &mdash; Use the wrap column for the max unless the terminal width is less.
* [handleReplLine](#handlereplline) &mdash; Handle the REPL line.
* [runEvaluatePrintLoop](#runevaluateprintloop) &mdash; Run commands at a prompt.

# replHelp

Help text.


~~~nim
replHelp = """Enter statements or commands at the prompt.

Available commands:

* h — this help text
* p — print a variable like in a replacement block
* pd — print a dictionary as dot names
* pf - print function names, signatures or docs, e.g. f, f.cmp, f.cmp[0]
* plc - print a list in columns
* plv - print a list vertical, one element per line
* v — print the number of variables in the one letter dictionaries
* q — quit (ctrl-d too)"""
~~~

# ReplCommand

The REPL commands.

* not_cmd — not a REPL command
* h_cmd — display help
* p_cmd — print variable
* pd_cmd — print dictionary
* pf_cmd — print f or function
* plc_cmd — print list in columns
* plv_cmd — print list one per line
* v_cmd — print number of variables in the one letter dictionaries
* q_cmd — quit (or Ctrl-d)


~~~nim
ReplCommand = enum
  not_cmd, h_cmd, p_cmd, pd_cmd, pf_cmd, plc_cmd, plv_cmd, v_cmd, q_cmd
~~~

# listInColumns

Generate a string of names in columns.  Width is the width of a
row. The names are left justified and the columns are separated
by 2 spaces.


~~~nim
proc listInColumns(names: seq[string]; width: Natural): string
~~~

# stringToReplCommand

Use the wrap column for the max unless the terminal width is less.


~~~nim
func stringToReplCommand(str: string): ReplCommand
~~~

# handleReplLine

Handle the REPL line. Return true to end the loop.


~~~nim
proc handleReplLine(env: var Env; variables: var Variables; line: string): bool {.
    raises: [KeyError, IOError, OSError, ValueError, Exception],
    tags: [WriteIOEffect, RootEffect, TimeEffect, ReadEnvEffect].}
~~~

# runEvaluatePrintLoop

Run commands at a prompt.


~~~nim
proc runEvaluatePrintLoop(env: var Env; args: Args) {.
    raises: [Exception, IOError, ValueError, OSError, KeyError], tags: [
    RootEffect, WriteIOEffect, TimeEffect, ReadDirEffect, ReadIOEffect,
    ReadEnvEffect].}
~~~


---
⦿ Markdown page generated by [StaticTea](https://github.com/flenniken/statictea/) from nim doc comments. ⦿
