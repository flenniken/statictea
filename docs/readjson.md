# readjson.nim

Read json content.

* [readjson.nim](../src/readjson.nim) &mdash; Nim source code.
# Index

* const: [maxDepth](#maxdepth) &mdash; The maximum depth you can nest items.
* type: [StrAndPos](#strandpos) &mdash; StrAndPos holds the result of parsing a string literal, the
string and its ending position.
* type: [StrAndPosOr](#strandposor) &mdash; The string and position or a warning.
* [newStrAndPosOr](#newstrandposor) &mdash; Return a new StrAndPosOr object containing a warning.
* [newStrAndPosOr](#newstrandposor-1) &mdash; Return a new StrAndPosOr object containing a warning.
* [newStrAndPosOr](#newstrandposor-2) &mdash; Return a new StrAndPosOr object containing a string and position.
* [jsonToValue](#jsontovalue) &mdash; Convert a Nim json node to a statictea value.
* [readJsonStream](#readjsonstream) &mdash; Read a json stream and return the parsed data in a value object or return a warning.
* [readJsonString](#readjsonstring) &mdash; Read a json string and return the parsed data in a value object or return a warning.
* [readJsonFile](#readjsonfile) &mdash; Read a json file and return the parsed data in a value object or return a warning.
* [unescapePopularChar](#unescapepopularchar) &mdash; Unescape the popular char and return its value.
* [parseJsonStr](#parsejsonstr) &mdash; Parse the quoted json string literal.

# maxDepth

The maximum depth you can nest items.

```nim
maxDepth = 16
```

# StrAndPos

StrAndPos holds the result of parsing a string literal, the
string and its ending position.

* str -- resulting parsed string
* pos -- the position after the last trailing whitespace

```nim
StrAndPos = object
  str*: string
  pos*: Natural

```

# StrAndPosOr

The string and position or a warning.

```nim
StrAndPosOr = OpResultWarn[StrAndPos]
```

# newStrAndPosOr

Return a new StrAndPosOr object containing a warning.

```nim
func newStrAndPosOr(warning: MessageId; p1: string = ""; pos = 0): StrAndPosOr
```

# newStrAndPosOr

Return a new StrAndPosOr object containing a warning.

```nim
func newStrAndPosOr(warningData: WarningData): StrAndPosOr
```

# newStrAndPosOr

Return a new StrAndPosOr object containing a string and position.

```nim
func newStrAndPosOr(str: string; pos: Natural): StrAndPosOr
```

# jsonToValue

Convert a Nim json node to a statictea value.

```nim
proc jsonToValue(jsonNode: JsonNode; depth: int = 0): ValueOr
```

# readJsonStream

Read a json stream and return the parsed data in a value object or return a warning.

```nim
proc readJsonStream(stream: Stream): ValueOr
```

# readJsonString

Read a json string and return the parsed data in a value object or return a warning.

```nim
proc readJsonString(content: string): ValueOr
```

# readJsonFile

Read a json file and return the parsed data in a value object or return a warning. A warning is returned when the root object is not a dictionary.

```nim
proc readJsonFile(filename: string): ValueOr
```

# unescapePopularChar

Unescape the popular char and return its value. If the char is
not a popular char, return 0.

 Popular characters and their escape values:

|char      | name           | unicode|
|----------|----------------|--------|
|"         | quotation mark | U+0022 |
|\        | reverse solidus| U+005C |
|/         | solidus        | U+002F |
|b         | backspace      | U+0008 |
|f         | form feed      | U+000C |
|n         | line feed      | U+000A |
|r         | carriage return| U+000D |
|t         | tab            | U+0009 |

```nim
proc unescapePopularChar(popular: char): char
```

# parseJsonStr

Parse the quoted json string literal. The startPos points one
past the leading double quote.  Return the parsed string value
and the ending position one past the trailing whitespace. On
failure, the ending position points at the invalid character and
the message id tells what went wrong.

~~~
a = "test string"  \n
     ^             ^
~~~~

```nim
func parseJsonStr(text: string; startPos: Natural): StrAndPosOr
```


---
⦿ Markdown page generated by [StaticTea](https://github.com/flenniken/statictea/) from nim doc comments. ⦿
