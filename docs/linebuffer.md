# linebuffer.nim

Read lines from a stream without exceeding the maximum line length. The returned lines contain the line ending, either crlf or lf.

Example:

~~~
let lbO = newLineBuffer(stream)
check lbO.isSome == true
var lb = lbO.get()
while line = lb.readLine():
  processLine(line)
~~~

* [linebuffer.nim](../src/linebuffer.nim) &mdash; Nim source code.
# Index

* const: [minMaxLineLen](#minmaxlinelen) &mdash; The minimum line length supported.
* const: [maxMaxLineLen](#maxmaxlinelen) &mdash; The maximum line length supported.
* const: [defaultMaxLineLen](#defaultmaxlinelen) &mdash; The maximum line length.
* const: [defaultBufferSize](#defaultbuffersize) &mdash; The buffer size for reading lines.
* type: [LineBuffer](#linebuffer) &mdash; The LineBuffer holds information about reading lines from a buffer.
* [getLineNum](#getlinenum) &mdash; Return the current line number.
* [getMaxLineLen](#getmaxlinelen) &mdash; Return the maximum line length.
* [getFilename](#getfilename) &mdash; Return the filename of the stream, if there is one.
* [getStream](#getstream) &mdash; Return the associated stream.
* [newLineBuffer](#newlinebuffer) &mdash; Return a new LineBuffer for the given stream.
* [reset](#reset) &mdash; Clear the buffer and set the read position at the start of the stream.
* [readline](#readline) &mdash; Return the next line from the LineBuffer.
* [yieldContentLine](#yieldcontentline) &mdash; Yield one line at a time from the content string and keep the line endings.

# minMaxLineLen

The minimum line length supported.

```nim
minMaxLineLen = 8
```

# maxMaxLineLen

The maximum line length supported.

```nim
maxMaxLineLen = 8192
```

# defaultMaxLineLen

The maximum line length.

```nim
defaultMaxLineLen = 1024
```

# defaultBufferSize

The buffer size for reading lines.

```nim
defaultBufferSize = 16384
```

# LineBuffer

The LineBuffer holds information about reading lines from a buffer.
* stream -- a stream containing lines to read processed sequentially
* maxLineLen -- the maximum line length
* bufferSize -- the buffer size for reading lines
* lineNum -- he current line number in the file starting at 1
* pos -- current byte position in the buffer
* charsRead -- number of bytes in the buffer
* buffer -- memory allocated for the buffer
* filename -- the optional stream's filename

```nim
LineBuffer = object
  stream: Stream
  maxLineLen: int
  bufferSize: int
  lineNum: int
  pos: int
  charsRead: int
  buffer: string
  filename: string

```

# getLineNum

Return the current line number.

```nim
proc getLineNum(lineBuffer: LineBuffer): int 
```

# getMaxLineLen

Return the maximum line length.

```nim
proc getMaxLineLen(lineBuffer: LineBuffer): int 
```

# getFilename

Return the filename of the stream, if there is one.

```nim
proc getFilename(lineBuffer: LineBuffer): string 
```

# getStream

Return the associated stream.

```nim
proc getStream(lineBuffer: LineBuffer): Stream 
```

# newLineBuffer

Return a new LineBuffer for the given stream.

```nim
proc newLineBuffer(stream: Stream; maxLineLen: int = defaultMaxLineLen;
                   bufferSize: int = defaultBufferSize; filename: string = ""): Option[
    LineBuffer] 
```

# reset

Clear the buffer and set the read position at the start of the stream.

```nim
proc reset(lb: var LineBuffer) {.raises: [IOError, OSError], tags: [].}
```

# readline

Return the next line from the LineBuffer. Reading starts from the
current position in the stream and advances the amount read.

A line end is defined by either a crlf or lf and they get
returned with the line bytes. A line is returned when the line
ending is found, when the stream runs out of bytes or when the
maximum line length is reached.

You cannot tell whether the line was truncated or not without
reading the next line. When no more data exists in the stream, an
empty string is returned.

```nim
proc readline(lb: var LineBuffer): string {.raises: [IOError, OSError],
    tags: [ReadIOEffect].}
```

# yieldContentLine

Yield one line at a time from the content string and keep the line endings.

```nim
iterator yieldContentLine(content: string): string 
```


---
⦿ Markdown page generated by [StaticTea](https://github.com/flenniken/statictea/) from nim doc comments. ⦿
